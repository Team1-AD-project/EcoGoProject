# OWASP ZAP DAST Configuration

env:
  contexts:
    - name: EcoGo-API
      urls:
        - http://localhost:8090
      includePaths:
        - http://localhost:8090/api/.*
      excludePaths:
        - http://localhost:8090/actuator/.*
        - http://localhost:8090/error.*
      authentication:
        method: json
        parameters:
          loginUrl: http://localhost:8090/api/v1/auth/login
          loginRequestData: '{"username":"test@example.com","password":"test123"}'

  parameters:
    failOnError: false
    failOnWarning: false
    progressToStdout: true

  jobs:
    - type: passiveScan-config
      parameters:
        maxAlertsPerRule: 10
        scanOnlyInScope: true

    - type: spider
      parameters:
        maxDuration: 5
        context: EcoGo-API
        url: http://localhost:8090

    - type: activeScan
      parameters:
        context: EcoGo-API
        maxDuration: 10
        maxRuleDurationInMins: 2
        maxScanDurationInMins: 10
        policy: API-scan

    - type: report
      parameters:
        template: traditional-html
        reportDir: /zap/wrk
        reportFile: zap-report.html
        reportTitle: EcoGo DAST Report
