# OWASP ZAP DAST Configuration
# Optimized for CI/CD Pipeline

env:
  contexts:
    - name: EcoGo-API
      urls:
        - http://localhost:8090
      includePaths:
        - http://localhost:8090/.*
      excludePaths:
        - http://localhost:8090/actuator/.*
        - http://localhost:8090/error.*
        - http://localhost:8090/webjars/.*

  parameters:
    failOnError: false
    failOnWarning: false
    progressToStdout: true

  jobs:
    - type: passiveScan-config
      parameters:
        maxAlertsPerRule: 10

    - type: spider
      parameters:
        maxDuration: 3
        url: http://localhost:8090
        maxChildren: 10

    - type: passiveScan-wait
      parameters:
        maxDuration: 2

    - type: activeScan
      parameters:
        maxDuration: 5
        maxRuleDurationInMins: 1
        maxScanDurationInMins: 5

    - type: report
      parameters:
        template: traditional-html
        reportDir: /zap/wrk
        reportFile: zap-full-report.html
        reportTitle: EcoGo DAST Security Report
